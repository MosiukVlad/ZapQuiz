{% extends 'quiz/base.html' %}

{% block title %}Лідери — {{ quiz.title }}{% endblock %}

{% block content %}
<div class="quiz-container">
    <h1 class="mb-3">Лідери: {{ quiz.title }}</h1>

    {% if top_players %}
        <table class="table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Гравець</th>
                    <th>Бали</th>
                    <th>Дата</th>
                </tr>
            </thead>
            <tbody>
                {% for s in top_players %}
                    <tr {% if user.is_authenticated and s.user == user %}class="table-info"{% endif %}>
                        <td>{{ forloop.counter }}</td>
                        <td>
                            {% if s.user.userprofile.avatar %}
                                <img src="{{ s.user.userprofile.avatar.url }}" alt="avatar" class="rounded-circle me-2" style="width:30px;height:30px;">
                            {% endif %}
                            {{ s.user.username }}
                        </td>
                        <td>{{ s.total_score }}</td>
                        <td>{{ s.completed_at|date:"Y-m-d H:i" }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>Поки немає результатів.</p>
    {% endif %}

    <a href="{% url 'index' %}" class="btn btn-secondary">На головну</a>
</div>
{% endblock %}